<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>Remotely Voice Rooms</title>
  </head>
  <body>
    <div id="root"></div>  
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function(){
        // Assign handler to message event
        if ( window.addEventListener ) {
            window.addEventListener('message', handleMessage, false);
        } else if ( window.attachEvent ) { // ie8
            window.attachEvent('onmessage', handleMessage);
        }
        function handleMessage (event) {
          if(event.origin !== "https://remotely-voice-server.australiaeast.cloudapp.azure.com" || (!!event && !!event.source && event.source.includes("react"))){
            return;
          }
          if(!!event.data){
            console.log("data: ", event.data);
          }
        };
        function sendToIframe(method, data){
          if(!window.gameframe){
            window.gameframe = document.getElementsByTagName("iframe")[0].contentWindow;
          }
          console.log("Method data json" , method, data, JSON.stringify({'method':method,'parameters':data}));
          window.gameframe.postMessage(JSON.stringify({'method':method,'parameters':data}),'*');
        }
        window.sendtoiframe = sendToIframe;
      });
    </script>
  <script type="text/javascript" src="/bundle.js"></script></body>
</html>
